/*
 * This file was generated by the Gradle 'init' task.
 */

dependencies {
    compile project(':janusgraph-core')
    compile 'org.elasticsearch.client:elasticsearch-rest-client:7.3.1'
    compile 'ch.qos.logback:logback-classic:1.1.3'
    testCompile project(':janusgraph-backend-testutils')
    testCompile project(':janusgraph-inmemory')
    testCompile project(':janusgraph-berkeleyje')
    testCompile project(path: ':janusgraph-berkeleyje', configuration: 'testOutput')
    testCompile project(':janusgraph-cql')
    testCompile project(path: ':janusgraph-cql', configuration: 'testOutput')
    testCompile 'org.mockito:mockito-inline:2.23.0'
    testCompile 'net.java.dev.jna:jna:4.0.0'
    testCompile 'org.testcontainers:testcontainers'
    testCompile 'org.testcontainers:cassandra'
    testCompile 'org.testcontainers:elasticsearch'
    testCompile 'org.testcontainers:junit-jupiter'
    testCompile 'com.googlecode.json-simple:json-simple:1.1.1'
}

description = 'JanusGraph-ElasticSearch: Distributed Indexing Support'

task testsJar(type: Jar) {
    archiveClassifier = 'tests'
    from(sourceSets.test.output)
}

test {
    if (!hasProperty('testProfile')) ext.testProfile = 'elasticsearch7'
    def elasticsearchDockerImage = 'docker.elastic.co/elasticsearch/elasticsearch'
    def elasticsearchDockerVersion = '7.6.1'
    switch (testProfile) {
        case 'elasticsearch6':
            elasticsearchDockerVersion = '6.6.0'
            break
        case 'elasticsearch60':
            elasticsearchDockerVersion = '6.0.1'
            break
    }
    useJUnitPlatform {
        systemProperty('elasticsearch.docker.image', elasticsearchDockerImage)
        systemProperty('elasticsearch.docker.version', elasticsearchDockerVersion)
    }
}

